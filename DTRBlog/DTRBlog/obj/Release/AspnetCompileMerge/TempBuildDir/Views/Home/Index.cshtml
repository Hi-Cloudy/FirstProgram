@*
    index 博客首页
*@

@{
    ViewBag.Title = "追梦";
    Layout = "~/Views/Shared/HomeMaster.cshtml";
}
@using DTR.DATAConfig
@using DTR.DAL
@using DTRBlog.Models
@model List<DTR.DAL.BlogWorks>
    <article>
        <!-- banner begin-->
        <div class="banner">
            <!--轮播-->
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    @{
                        List<BlogWorks> list = ViewData["key"] as List<BlogWorks>;
                        for (int i = 0; i < list.Count; i++)
                        {
                            <div class="swiper-slide">
                                <a href="/@list[i].BlogID/Article/@list[i].BlogWorksID">
                                    <img src="@(DATAPathConfigs.DTRDataConfigNetWorkelPath + list[i].WorksPath + DATAPathConfigs.WorksFace)">
                                    <span>推荐</span>
                                </a>
                            </div>
                        }
                    }
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
        <!-- banner end-->
        <!-- headline-boc begin-->
        <div class="headline-box whitebg">
           <!--侧边-->
            <div class="headline-news">
                <ul class="headline-news-list" style="border-top:#ddd 0px solid">
                    @{
                        for (int i = 0; i < list.Count; i++)
                        {
                            if (i == 0)
                            {
                                <h2 class="headline-news-title"><span>头条</span><a href="/@list[i].BlogID/Article/@list[i].BlogWorksID" target="_blank" title="@list[i].Introduc">@list[i].Title</a></h2>
                                <p class="headline-news-smalltext">@list[i].Introduc</p>
                            }
                            else
                            {
                                <li><a href="/@list[i].BlogID/Article/@list[i].BlogWorksID" target="_blank" title="@list[i].Introduc">@list[i].Title</a></li>
                            }
                        }
                    }

                </ul>
            </div>
        </div>
        <!-- headline-box end-->
        <!--类型-->
        <div class="clear blank"></div>
        <div class="tuijian-news box whitebg tab-num01">
            <div class="gd-box">
                <ul id="tab">
                    @{
                        int typei = 0;
                        IEnumerable<HomeIndexBlogInfoViewModel> blogType = ViewData["BlogTypeInfo"] as IEnumerable<HomeIndexBlogInfoViewModel>;
                        foreach (HomeIndexBlogInfoViewModel item in blogType)
                        {
                            if (typei == 0)
                            {
                                <li class="tab-current">@item.BlogType.BlogTypeName</li>
                                typei++;
                            }
                            else
                            {
                                <li>@item.BlogType.BlogTypeName</li>
                            }
                        }
                    }
                </ul>
            </div>
            <div id="tab-content" >
                @{
                    foreach (HomeIndexBlogInfoViewModel itme in blogType)
                    {
                        @(Html.Raw("<section class='tab-box'>"))
                        bool isFirst = true;
                        foreach (BlogWorks works in itme.Works)
                        {
                            DateTime date = works.PublishDate ?? DateTime.MinValue;
                            if (isFirst)
                            {
                                <div class="tuijian-news-pic">
                                    <i><a href="/@works.BlogID/Article/@works.BlogWorksID"><img src="@(DATAPathConfigs.DTRDataConfigNetWorkelPath + works.WorksPath + DATAPathConfigs.WorksFace)" alt="鄙人从事IT业已经有9年时间,少壮不努力，长大搞IT"><span>推荐</span></a></i>
                                    <h2><a href="/@works.BlogID/Article/@works.BlogWorksID">@works.Title</a></h2>
                                    <p>@works.Introduc</p>
                                    <a href="/home/BlogInfo/@itme.BlogType.BlogTypeID" class="btn-blue-border">阅读更多</a>
                                </div>
                                isFirst = false;
                                continue;
                            }
                            <div class="tuijian-news-list">
                                <ul>
                                    <li>
                                        <a target="_blank" href="/@works.BlogID/Article/@works.BlogWorksID">
                                            <span><b>@date.Day</b>@(date.Year + "-" + date.Month)</span>
                                            <h3>@works.Title</h3>
                                            <p>@works.Introduc</p>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        }
                        <span class="tab-a-more"><a title=""><i></i><i></i><i></i></a></span>
                        @(Html.Raw("</section>"))
                    }
                }
            </div>
        </div>
        <!-- tuijian-news end-->
        <!-- pics end-->
        <div class="clear blank"></div>
        <div>
            
            <div class="videos box whitebg tab-num04" id="dtr-hblog">
                <div class="gd-box">
                    <ul id="tab">
                        <li class="tab-current">热门博客</li>
                    </ul>
                </div>
                <div id="tab-content">
                    <section class="tab-box">
                        <div class="videos-list">
                            <ul>
                                @{
                                    List<BlogWorks> hotblog = ViewData["hotblog"] as List<BlogWorks>;
                                    foreach (var item in hotblog)
                                    {
                                        <li>
                                            <a href="/@item.BlogID/Article/@item.BlogWorksID">
                                                <i><img src="@(DATAPathConfigs.DTRDataConfigNetWorkelPath + item.WorksPath + DATAPathConfigs.WorksFace)"></i>
                                                <h2>@item.Title</h2>
                                                <p><b class="datetime">@item.PublishDate.Value.ToString("yyyy-MM-dd")</b><span class="viewd">(@item.Collection.Count)人在看</span></p>
                                            </a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                        <span class="tab-a-more"><a title=""><i></i><i></i><i></i></a></span>
                    </section>
                </div>
            </div>
            <!-- videos end-->
        </div>


        <!--栏目-->
        <div class="clear blank"></div>
        <div class="news box whitebg tab-num03" id="dtr-lanmu">
            <div class="gd-box">
                <ul id="tab">

                    @{
                        int type2 = 0;
                        IEnumerable<LanMu> a = ViewData["lanMuInfo"] as IEnumerable<LanMu>;
                        foreach (LanMu item in a)
                        {
                            if (type2 == 0)
                            {
                                <li class="tab-current">@item.Board.BoardName</li>
                                type2++;
                            }
                            else
                            {
                                <li>@item.Board.BoardName</li>
                            }
                        }

                    }
                </ul>
            </div>
            <div id="tab-content">
                <section class="tab-box">
                    <div class="news-zuixin">
                        <ul>
                            @{
                                foreach (LanMu itme in a)
                                {
                                    foreach (var boar in itme.Works)
                                    {
                                        <li>
                                            <section>
                                                <a href="/@boar.BlogID/Article/@boar.BlogWorksID" class="news-zuixin-pic"><img src="@(DATAPathConfigs.DTRDataConfigNetWorkelPath + boar.WorksPath + DATAPathConfigs.WorksFace)"></a>
                                                <h2><a href="/@boar.BlogID/Article/@boar.BlogWorksID">@boar.Title</a></h2>
                                                <p>@boar.Introduc</p>
                                                <span><a href='/e/tags/?tagname=个人博客&tempid=8' target='_blank'>@boar.BlogType.BlogTypeName</a>  </span>
                                            </section>
                                        </li>
                                    }
                                }
                            }

                        </ul>
                    </div>
                    <span class="tab-a-more"><a><i></i><i></i><i></i></a></span>
                </section>
                <section class="tab-box">
                    <div class="news-zuixin">
                        <ul></ul>
                    </div>
                    <span class="tab-a-more"><a><i></i><i></i><i></i></a></span>
                </section>



                <section class="tab-box">
                    <div class="news-zuixin">
                        <ul></ul>
                    </div>
                    <span class="tab-a-more"><a href="/seosem/baping/" ><i></i><i></i><i></i></a></span>
                </section>
                <!--第一个数字11，是父栏目ID-->
            </div>
        </div>
        <!-- news end-->



        <div class="blank clear"></div>

        <div class="wenzi whitebg box tab-num05" id="dtr-newblog">
            <div class="gd-box">
                <ul id="tab">
                    <li class="tab-current">最新博文</li>
                </ul>
            </div>
            <div id="tab-content">
                <section class="tab-box">
                    <div class="wenzi-list">
                        <ul class="wenzi-left">
                            @{
                                List<BlogWorks> date1 = ViewData["key3"] as List<BlogWorks>;
                                for (int i = 0; i < date1.Count; i++)
                                {
                                    if (i <= 8)
                                    {
                                        <li><span>@date1[i].PublishDate.Value.Year-@date1[i].PublishDate.Value.Month-@date1[i].PublishDate.Value.Month</span><a href="/@date1[i].BlogID/Article/@date1[i].BlogWorksID" title="">@date1[i].Title</a></li>
                                    }
                                }
                            }
                        </ul>
                        <ul class="wenzi-right">
                            @{
                                for (int i = 0; i < date1.Count; i++)
                                {
                                    if (i > 8)
                                    {
                                        <li><span>@date1[i].PublishDate.Value.Year-@date1[i].PublishDate.Value.Month-@date1[i].PublishDate.Value.Month</span><a href="/@date1[i].BlogID/Article/@date1[i].BlogWorksID" title="">@date1[i].Title</a></li>
                                    }
                                }
                            }
                        </ul>
                    </div>
                    <span class="tab-a-more"><a ><i></i><i></i><i></i></a></span>
                </section>
            </div>
        </div>
        <!-- wenzi end-->
        @*<div class="clear"></div>*@
        <div class="ad ad-all"></div>
 
        <div class="wenzi whitebg box tab-num06" id="dtr-hbuser">
            <div class="gd-box">
                <ul id="tab">
                    <li class="tab-current">热门博主</li>
                </ul>
            </div>
            <div id="tab-content">
                <section class="tab-box">
                    <div class="down-list">
                        <ul>
                            @{
                                foreach (HotBlogUserViewModel userInfo in ViewData["key4"] as IEnumerable<HotBlogUserViewModel>)
                                {
                                    <li>
                                        <a href="/@userInfo.BlogUser.BlogID" target="_blank" class="dl-link">
                                            <i><img src="@(DATAPathConfigs.DTRDataConfigNetWorkelPath + userInfo.BlogUser.UserPath + DATAPathConfigs.BlogUserHeaderImg)"></i>
                                            <h2>@userInfo.BlogUser.Nikename<span>关注(@(userInfo.FollowCount ?? 0))&nbsp;点赞(@(userInfo.SupportCount ?? 0))</span></h2>
                                            <p>@userInfo.BlogUser.Industry</p>
                                        </a>
                                    </li>
                                }
                            }
                        </ul>
                    </div>
                    <span class="tab-a-more"><a><i></i><i></i><i></i></a></span>
                </section>
            </div>
        </div>
        <div class="clear blank"></div>
        <div class="whitebg box tags" id="ulike">
            <div class="news-title">
                <h2>猜你喜欢</h2>
                <span class="tab-a-more"><a><i></i><i></i><i></i></a></span>
            </div>
            <ul>
                @foreach (HomeIndexBlogInfoViewModel item in blogType)
                {
                    <li><a href="/home/BlogInfo/@item.BlogType.BlogTypeID" target="_blank">@item.BlogType.BlogTypeName</a></li>
                }
            </ul>
        </div>
        <!-- tags end-->
        <div class="blank clear"></div>
    </article>

<script>

</script>